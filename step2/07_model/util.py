import os
import pickle
import numpy as np

MALWARE_PATH = "malware/"
NORMAL_PATH = "normal/"
STOP_POINT = 100

def read_data(file_path):
    global STOP_POINT
    files = [file for file in os.listdir(file_path) if file.endswith(".pickle")]
    data = []
    count = 0
    for file in files:
        with open(file_path + file, 'rb') as f:
            data.append([[pickle.load(f)]])
        count += 1
        if count == STOP_POINT:
            break

    return data, count

def read_data_set(DATA_SET_PATH):
    global MALWARE_PATH, NORMAL_PATH
    mal_data, len_mal_data = read_data(DATA_SET_PATH+MALWARE_PATH)
    mal_label = [1 for _ in range(len_mal_data)]
    nor_data, len_nor_data = read_data(DATA_SET_PATH+NORMAL_PATH)
    # nor_data, len_nor_data = [], 0
    nor_label = [0 for _ in range(len_nor_data)]

    return np.asarray(mal_data+nor_data), np.asarray(mal_label+nor_label)


if __name__=='__main__':
    data, mal_label = read_data_set()
    print(data[:100], mal_label)
    print(data.shape)